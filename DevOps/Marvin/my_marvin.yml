
jenkins:
    systemMessage: "Welcome to the Chocolatine-Powered Marvin Jenkins Instance."
    remotingSecurity:
        enabled: true
    securityRealm:
        local:
            allowsSignup: false
            users:
                - id: "chocolateen"
                  name: "Hugo"
                  password: ${USER_CHOCOLATEEN_PASSWORD}
                - id: "vaugie_g"
                  name: "Garance"
                  password: ${USER_VAUGIE_G_PASSWORD}
                - id: "i_dont_know"
                  name: "Jeremy"
                  password: ${USER_I_DONT_KNOW_PASSWORD}
                - id: "nasso"
                  name: "Nassim"
                  password: ${USER_NASSO_PASSWORD}
    authorizationStrategy:
        roleBased:
            roles:
                global:
                    - name: "admin"
                      description: "Marvin master"
                      permissions:
                          - "Overall/Administer"
                      assignments:
                          - "chocolateen"
                    
                    - name: "ape"
                      description: "Pedagogical team member"
                      permissions:
                          - "Overall/Read"
                          - "Job/Workspace"
                          - "Job/Build"
                          - "Job/Read"
                      assignments:
                          - "i_dont_know"
                    - name: "gorilla"
                      description: "Group Obsessively Researching Innovation Linked to Learning and Accomplishment"
                      permissions:
                          - "Overall/Read"
                          - "Job/Workspace"
                          - "Job/Build"
                          - "Job/Create"
                          - "Job/Configure"
                          - "Job/Delete"
                          - "Job/Cancel"
                          - "Job/Move"
                          - "Job/Read"
                      assignments:  
                          - "vaugie_g"
                    - name: "assist"
                      description: "Assistant"
                      permissions:
                          - "Overall/Read"
                          - "Job/Workspace"
                          - "Job/Read"
                      assignments:
                          - "nasso"                      

jobs:
    - script: >
        folder('tools') {
            displayName('Tools')
            description('Folder for miscellaneous tools.')
        }

job:
    folder: 'tools'
    name: "clone-repository"
    vm-template: Basic Build VM Template
    git:
    - url: ${GIT_REPOSITORY_URL}
        description: "Git URL of the repository to clone"
    builders:
        - shell: git clone url
    steps:
    - maven:
        goals: clean install
    after:
    - artifacts:
    settings:
        - discard-old:
            days-to-keep-build: 5
            builds-to-keep: 10
            days-to-keep-artifacts: 5
            artifacts-to-keep: 10
# job('example') {
#             steps {
#                 shell('echo Hello World!')
#             }
#         }        